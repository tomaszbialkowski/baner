(function(){'use strict';var d="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},e;if("function"==typeof Object.setPrototypeOf)e=Object.setPrototypeOf;else{var f;a:{var g={a:!0},h={};try{h.__proto__=g;f=h.a;break a}catch(a){}f=!1}e=f?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var k=e;
function l(a,b){a.prototype=d(b.prototype);a.prototype.constructor=a;if(k)k(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(b,c);n&&Object.defineProperty(a,c,n)}else a[c]=b[c];a.j=b.prototype};function m(){var a=HTMLElement.call(this)||this;a.video=null;a.g=0;a.h=function(){a.g<=a.getTime()&&p(a);a.g=a.video.duration};a.i=function(){return a.handleVideoTimeUpdate()};a.resizeHandlerNeeded=!1;return a}l(m,HTMLElement);
m.prototype.connectedCallback=function(){var a=this.parentElement;a&&a.interactiveVideoComponents&&(this.video=a,this.video.interactiveVideoComponents.push(this),this.video.setResizeObserver(),this.video.addEventListener("ended",this.h,!1),this.video.addEventListener("timeupdate",this.i,!1))};
m.prototype.disconnectedCallback=function(){if(this.video&&this.video.interactiveVideoComponents){var a=this.video.interactiveVideoComponents.indexOf(this);-1!=a&&this.video.interactiveVideoComponents.splice(a,1);this.video.setResizeObserver();this.video.removeEventListener("ended",this.h,!1);this.video.removeEventListener("timeupdate",this.i,!1)}this.video=null};m.prototype.resize=function(){};function p(a){var b=void 0===b?null:b;var c=document.createEvent("CustomEvent");c.initCustomEvent("cuepoint",!0,!0,b);a.dispatchEvent(c)};function q(){return m.call(this)||this}l(q,m);q.prototype.seek=function(){this.video.seek(this.getTime())};q.prototype.getTime=function(){var a=this.getAttribute("time");return a?parseFloat(a):0};q.prototype.setTime=function(a){this.setAttribute("time",Math.max(a,0))};
q.prototype.handleVideoTimeUpdate=function(){this.video.nativeElement.seeking||this.g==this.video.currentTime||(this.video.loop&&.25>this.video.currentTime&&this.g>=this.video.duration-.25&&(this.g<=this.getTime()||this.getTime()<this.video.currentTime)?p(this):this.g<=this.getTime()&&this.getTime()<this.video.currentTime&&p(this),this.g=this.video.currentTime)};customElements.define("gwd-cuepoint",q);}).call(this);
